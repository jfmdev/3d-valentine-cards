import{M as y,W as C,P as j,S as k,C as B,O as v,D as N,F as W,B as q,a as L,T as G,b as V}from"./TextGeometry-6XPjNbtp.js";const X="#myCanvas",J=1.3,K=1.2,Q=4,P=[new y({color:16711680}),new y({color:16744656}),new y({color:16711808})],x=[{xRange:[-11,11],yRange:[-11.9,11.8],z:-12,limit:6,scale:.03},{xRange:[-8,8],yRange:[-9,8.8],z:-8,limit:4,scale:.03},{xRange:[-3.5,3.5],yRange:[-4.3,4.2],z:-2,limit:2,scale:.03},{xRange:[-1.5,-1],yRange:[-2.2,2],z:1,limit:1,scale:.03},{xRange:[1,1.5],yRange:[-2.2,2],z:1.01,limit:1,scale:.03}],U=0,S=["Happy","Valentines Day!","Roses are red,","violets are blue","Honey is sweet,","and so are you."],Y="Touch to open";let r=null,m=null,d=null,z=0,w=!1,A=!1,H=null,R=[],h=null,l=null;async function Z(a,n){let e;R.length===0?e=await $():e=R[0].clone(),n||(n=.1),e.scale.set(n,n,n);const t=P[Math.floor(Math.random()*P.length)];e.traverse(o=>{o.material=t}),e.position.x=a.x,e.position.y=a.y,e.position.z=a.z,e.rotation.y=Math.random()*Math.PI,d.add(e),R.push(e)}function $(){return new Promise(function(a,n){new V().load("./models/heart-v2.obj",function(t){a(t)},void 0,function(t){n(t)})})}function ee(){A=!0,w=!0}function F(){w=!1}function b(a,n,e){const t=new y({color:n}),o=new G(a,{font:H,size:80,depth:5,curveSegments:12,bevelEnabled:!0,bevelThickness:10,bevelSize:4,bevelOffset:0,bevelSegments:5});o.center();const s=new L(o,t);return s.scale.set(e,e,e),s}async function ne(){const a=document.querySelector(X);m=new C({antialias:!0,canvas:a});const n=75,e=2,t=.1,o=500;r=new j(n,e,t,o),r.position.x=0,r.position.z=3,r.position.y=0,r.lookAt(0,0,0),d=new k,d.background=new B().setHex(16777215),m.render(d,r),l=new v,l.position.z=U,d.add(l),h=new v,h.rotation.y=Math.PI,l.add(h);const s=16777215,p=3,M=new N(s,p);M.position.set(-1,2,4),d.add(M),new W().load("./fonts/helvetiker_regular.typeface.json",function(f){H=f,S.map(function(c,g){const T=b(c,16711808,.0023);return T.position.z=.1,T.position.y=.3*(S.length/2-(g+.5)),T}).forEach(function(c){h.add(c)});const u=b(Y,8421376,.0025);u.position.z=.1,l.add(u)});for(let f=0;f<x.length;f++){const i=x[f],u=(i.yRange[1]-i.yRange[0])/i.limit;for(let c=0;c<i.limit;c++){const g=[c*u+i.yRange[0],(c+1)*u+i.yRange[0]];await Z({x:E(i.xRange[0],i.xRange[1]),y:E(g[0],g[1]),z:i.z},i.scale)}}const _=new q(2.7,2,.05),D=new y({color:15263976}),O=new L(_,D);l.add(O),window.requestAnimationFrame(I)}function I(a){a*=.001;let n=a-z;if(z=a,w){const e=l.rotation.y;let t=e+n*Q;t>=2*Math.PI?(t=0,F()):e<Math.PI&&t>=Math.PI&&(t=Math.PI,F()),l.rotation.y=t}if(A){const e=n*K,t=n*J;R.forEach(function(o){o.rotation.y=o.rotation.y+e,o.rotation.y>2*Math.PI&&(o.rotation.y-=2*Math.PI),o.position.y=o.position.y+t;const s=x.find(p=>p.z===o.position.z);s&&o.position.y>s.yRange[1]&&(o.position.y=s.yRange[0],o.position.x=E(s.xRange[0],s.xRange[1]))})}if(oe(m)){const e=m.domElement;r.aspect=e.clientWidth/e.clientHeight,r.updateProjectionMatrix()}m.render(d,r),window.requestAnimationFrame(I)}function te(){w||ee()}function E(a,n){return Math.random()*(n-a)+a}function oe(a){const n=a.domElement,e=n.clientWidth,t=n.clientHeight,o=n.width!==e||n.height!==t;return o&&a.setSize(e,t,!1),o}window.addEventListener("load",function(){window.addEventListener("pointerdown",te),ne()});
